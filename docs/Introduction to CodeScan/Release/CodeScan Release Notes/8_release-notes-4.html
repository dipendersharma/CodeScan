<!-- ## Metadata_Start
## title: Release Notes 4.2
## original-url : https://knowledgebase.autorabit.com/docs/release-notes-42
## article-id : 439b3402-e6c0-4489-8e54-2a06123cc6b0
## seo-title : 
## description : 
## Metadata_End -->
<h2>CodeScan 4.2</h2><h3>New Features</h3><p><strong>New Apex Rules</strong></p><ul><li><strong>Avoid Insecure Digest Algorithms</strong>: MD5 and SHA-1 algorithms are no longer considered secure because it's too easy to create a hash collision between two message contents.</li><li><strong>Avoid Salesforce System Class Names</strong>: Classes with names that already exist as internal classes will take precedence due to namespacing.</li><li><strong>Avoid Nested Switch Statements</strong>: Avoid creating nested 'switch' statements since they are error-prone, harder to read, and harder to maintain.</li><li><strong>Avoid Reversed Operators</strong>: Reversing operators may be a bug, or at the very least make it hard to read.</li><li><strong>Avoid Using HTTP Referer Headers</strong>: HTTP Referer headers can be modified by attackers. Making a decision based on the value of the referer can be dangerous.</li><li><strong>Catch Block Should Do More Than Rethrow</strong>: Catch blocks that do nothing but rethrow an exception should either be changed or removed.</li><li><strong>Field Level Security Vulnerabilities</strong>: This rule makes sure that the code checks for access permissions before running a SOQL, SOSL, or DML operation.<br><strong>Single Method Singleton</strong>: Avoid using overloaded getInstance methods.<br>Statements Should Be On Separate Lines<br>Statements should be on separate lines to increase readability and maintainability.</li><li><strong>Suspicious For Loop Incrementer</strong>: Incrementers that do not match the body of the for loop could be a bug.</li><li><strong>Ternary operators that can be simplified with || or &amp;&amp;</strong>: Ternary operators with the form <code data-backticks="1">condition ? literalBoolean : foo</code> or <code data-backticks="1">condition ? foo : literalBoolean</code> can be simplified.</li><li><strong>Unexpected Casting of Types</strong>: When arithmetic is performed on a type, the type remains the same even if the result is a different type. This can return an unexpected result.</li></ul><p><strong>Updated Apex Rules</strong></p><ul><li><strong>Division By Zero</strong>: Division by zero exception may occur when zero could be the denominator to a division or modulo operation.</li><li><strong>Apex Classes should use Random IV/Key</strong>: Now checks for EncodingUtil.base64Decode(key);</li></ul><p><strong>New Visualforce Rules</strong></p><ul><li><strong>Avoid using GETSESSIONID() and $API.Session_Id</strong>: Lightning Experience does not have access to the API session token. Visualforce pages that access the session ID should be tested within Lightning Experience.</li><li><strong>External Script and Style Resources Should Be Avoided</strong>: Including content from untrusted sources can lead to various security issues including include injection of malware.</li><li><strong>Remove OnClick Javascript</strong>: Javascript in "onclick", "onmouseover" and similar actions within components are ignored.</li><li><strong>Require CSRF Protection On GET Requests</strong>: Require CSRF protection on GET requests must be enabled from the Visual Force Page settings.</li><li><strong>Unencoded Formulas In Style Tags XSS</strong>: Makes sure that all values obtained from URL parameters are properly escaped / sanitized to avoid XSS attacks.</li><li><strong>Unescaped Value Could Cause XSS</strong>: Reflected Cross-site Scripting (XSS) occurs when an attacker injects browser executable code within a single HTTP response. Using unescaped parameters can be a security risk.</li><li><strong>Avoid Apex Tags Within Script</strong>: Avoid using &lt;apex:*&gt; tags within &lt;script&gt; tags for readability and security.</li></ul><h3><br>Enhancements</h3><ul><li style="box-sizing: border-box;">Improved documentation on vulnerabilities including links to OWASP and CERT explanations.</li><li style="box-sizing: border-box;">Support for Inherited Sharing Keywords in Apex - <a href="https://help.salesforce.com/s/articleView?id=release-notes.rn_apex_inherited_sharing.htm&amp;type=5&amp;release=216" rel="nofollow noopener noreferrer" style="box-sizing: border-box; background-color: transparent; color: rgb(0, 114, 239); text-decoration: none;" target="_blank" translate="no">Salesforce Documentation</a></li></ul><p><br></p><h3>Bug Fixes</h3><ul style="box-sizing: border-box; list-style: outside disc; margin: 20px 0px 20px 20px; padding: 0px 0px 0px 20px; color: rgb(51, 51, 51); font-family: sans-serif; font-size: 15px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><li style="box-sizing: border-box;">Code coverage that does not match the current state of the codebase no longer causes unrecoverable errors (<strong>v4.2.0</strong>)</li><li style="box-sizing: border-box;">Fixed bug that caused component files to not scan correctly (<strong>v4.2.2</strong>)</li><li style="box-sizing: border-box;">Fixed issue that caused certain tags starting with "\" in comments to not parse (<strong>v4.2.3</strong>)</li><li style="box-sizing: border-box;">Fixed issue that caused code coverage to not be applied. (<strong>v4.2.3</strong>)</li><li style="box-sizing: border-box;">Fixed bug in Long Javascript rule that causes the length to be improperly calculated (<strong>v4.2.3</strong>)</li><li style="box-sizing: border-box;">Fixed issue that caused files to not highlight correctly <strong>(v4.2.3</strong>)</li><li style="box-sizing: border-box;">Fixed bug that caused Class Without Test Class rule to ignore certain files (<strong>v4.2.3</strong>)</li><li style="box-sizing: border-box;">Fixed bug that caused errors to appear and disappear (<strong>v4.2.3</strong>)</li><li style="box-sizing: border-box;">Fixed bug that caused certain code coverage data to be displayed incorrectly (<strong>v4.2.5</strong>)</li><li style="box-sizing: border-box;">Fixed bug in the Class Without Test Class rule (<strong>v4.2.6</strong>)</li></ul><p><br></p><h3>Other Changes</h3><ul style="box-sizing: border-box; list-style: outside disc; margin: 20px 0px 20px 20px; padding: 0px 0px 0px 20px; color: rgb(51, 51, 51); font-family: sans-serif; font-size: 15px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><li style="box-sizing: border-box;">The rule "Class with only Private Constructors should be Final" has been deprecated and removed completely. &nbsp;Classes are final by default therefore this rule is unnecessary.</li><li style="box-sizing: border-box;">The rule "Remove OnClick Javascript" has been removed from the default Visualforce and Lightning Quality Profile.</li><li style="box-sizing: border-box;">SonarQubeâ„¢ 7.6 Support</li><li style="box-sizing: border-box;">A selection of new rules has been added to the default Quality Profiles (<strong>4.2.1</strong>).</li></ul>
